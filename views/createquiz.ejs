<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Quiz</title>
  <link rel="stylesheet" href="/styles.css"> <!-- Include any necessary CSS files -->
</head>
<body>
  <h1>Create Quiz</h1>
  <!-- Add the form to create a quiz -->
  <form id="quizForm" action="/quizzes/create" method="POST">
    <label for="title">Quiz Title:</label>
    <input type="text" id="title" name="title" required>
    <br>
    <label>Questions:</label>
    <div id="questionsContainer">
      <div class="question">
        <textarea class="questionText" name="questions[]" rows="4" required></textarea>
        <div class="choices">
          <label>
            <input type="radio" name="correctAnswer[0]" value="A" required>
            Choice A:
            <input type="text" name="choiceA[0]" required>
          </label>
          <label>
            <input type="radio" name="correctAnswer[0]" value="B" required>
            Choice B:
            <input type="text" name="choiceB[0]" required>
          </label>
          <label>
            <input type="radio" name="correctAnswer[0]" value="C" required>
            Choice C:
            <input type="text" name="choiceC[0]" required>
          </label>
          <label>
            <input type="radio" name="correctAnswer[0]" value="D" required>
            Choice D:
            <input type="text" name="choiceD[0]" required>
          </label>
        </div>
      </div>
    </div>
    <br>
    <button type="button" id="addQuestionButton">Add Question</button>
    <button type="button" id="createQuizButton">Create Quiz</button>
  </form>
  <div id="quizContainer"></div> <!-- Container to display the created quiz -->
  <div id="buttonsContainer"></div> <!-- Container for the buttons -->
  <script src="public/scripts/script.js"></script>
 <!-- Include any necessary JavaScript files -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Include jQuery -->
  <script>
    $(document).ready(function() {
      var quizData = {
        title: '',
        questions: [],
        choices: []
      };

      function createQuestionHTML(questionNumber) {
        return `
          <div class="question">
            <textarea class="questionText" name="questions[]" rows="4" required></textarea>
            <div class="choices">
              <label>
                <input type="radio" name="correctAnswer[${questionNumber}]" value="A" required>
                Choice A:
                <input type="text" name="choiceA[${questionNumber}]" required>
              </label>
              <label>
                <input type="radio" name="correctAnswer[${questionNumber}]" value="B" required>
                Choice B:
                <input type="text" name="choiceB[${questionNumber}]" required>
              </label>
              <label>
                <input type="radio" name="correctAnswer[${questionNumber}]" value="C" required>
                Choice C:
                <input type="text" name="choiceC[${questionNumber}]" required>
              </label>
              <label>
                <input type="radio" name="correctAnswer[${questionNumber}]" value="D" required>
                Choice D:
                <input type="text" name="choiceD[${questionNumber}]" required>
              </label>
            </div>
          </div>
        `;
      }

      function updateQuizData() {
        quizData.title = $('#title').val();

        $('.question').each(function(index) {
          var questionText = $(this).find('.questionText').val();
          var choices = {
            A: $(this).find('input[name="choiceA[' + index + ']"]').val(),
            B: $(this).find('input[name="choiceB[' + index + ']"]').val(),
            C: $(this).find('input[name="choiceC[' + index + ']"]').val(),
            D: $(this).find('input[name="choiceD[' + index + ']"]').val()
          };

          quizData.questions[index] = {
            questionText: questionText,
            choices: choices
          };
        });
      }

      function displayQuiz() {
        var quizHTML = '<h2>' + quizData.title + '</h2>';

        quizData.questions.forEach(function(question) {
          quizHTML += '<div class="question">';
          quizHTML += '<p>' + question.questionText + '</p>';
          quizHTML += '<ul>';
          for (var choice in question.choices) {
            quizHTML += '<li>';
            quizHTML += '<label>';
            quizHTML += '<input type="radio" disabled>';
            quizHTML += choice + ': ' + question.choices[choice];
            quizHTML += '</label>';
            quizHTML += '</li>';
          }
          quizHTML += '</ul>';
          quizHTML += '</div>';
        });

        $('#quizContainer').html(quizHTML);
        // Add the buttons
        var buttonsHTML = `
          <button type="button" id="makePublicButton">Make Quiz Public</button>
          <button type="button" id="makePrivateButton">Make Quiz Private</button>
        `;
        $('#buttonsContainer').html(buttonsHTML);

        $('#makePublicButton').click(function() {
          $.ajax({
            type: 'POST',
            url: '/quizzes/create',
            data: $('#quizForm').serialize(),
            success: function(response) {
              // Redirect to the "/quizzes" page
              window.location.href = '/quizzes';
            },
            error: function(error) {
              console.log('Error:', error);
            }
          });
        });

        $('#makePrivateButton').click(function() {
          // Redirect to the My Quizzes page
          window.location.href = "/my-quizzes";
        });
      }

      $('#addQuestionButton').click(function() {
        var questionNumber = $('.question').length;

        var questionHTML = createQuestionHTML(questionNumber);

        $('#questionsContainer').append(questionHTML);
      });

      $('#createQuizButton').click(function() {
        updateQuizData();
        displayQuiz();
      });
    });
  </script>
</body>
</html>






